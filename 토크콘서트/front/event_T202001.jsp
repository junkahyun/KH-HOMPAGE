<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/talk_reset.css" />
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/talk2019.css" />
<style>
.customStyleSelectBoxInner{color: black;}
span.customStyleSelectBox {background-color: #ffffff;border: none;}
.on{border: 2px solid #ff2544; position:absolute;bottom:0;}
#banner_bot_scroll_icon{position:absolute;top:663px;left:50%;width:34px;height:65px;margin-left: -17px;background: url(/resources/images/main/new/img_scroll.png);z-index:1000002;}
#talkconcert{display:none;}
.agree_information{color:#555; font-size:12px; border-bottom:1px solid #555;}
</style>
<div id="wrapper">
	<div id="header">
		<div class="header_tab">
			<ul class="anchor_tab">
				<li style="cursor:pointer;" onclick="window.scrollTo(0,0);"><img src="${pageContext.request.contextPath}/resources/images/talk2020/logo.png" alt="kh정보교육원 로고"></li>
				<li><a data-anchor="section1" data-height="800"><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_top_tit1.png"></a><p class="tab" style="width:65px;"></p></li>
				<li><a data-anchor="section2" data-height="1400"><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_top_tit2.png"></a><p class="tab" style="width:65px;"></p></li>
				<li><a data-anchor="section3" data-height="2300"><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_top_tit3.png"></a><p class="tab" style="width:125px;"></p></li>
				<li><a data-anchor="section4" data-height="3300"><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_top_tit4.png"></a><p class="tab" style="width:71px;"></p></li>
				<li><a href="${pageContext.request.contextPath}/main/main.kh" target="_blank"><img src="${pageContext.request.contextPath}/resources/images/talk2020/top_homepage.png" alt="kh정보교육원 로고"></a></li>
			</ul>
		</div>
	</div>
	<div id="main_visual_wrap">
		<div class="main_visual">
				<p class="question_title_top"><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_visual_tit1.png"></p>
				<!-- <p class="typing-txt">Future is Now, 미래를 IT는 KH</p> -->
				<p class="typing-txt">Future&nbsp;is&nbsp;Now,&nbsp;미래를&nbsp;잇는&nbsp;KH|it는&nbsp;KH</p>
				<p class="typing"></p> 
				<p class="question_title_bottom"><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_visual_tit3.png"></p>	
		</div><!-- //main_visual -->
		<div class="question_event_information">
			<h1><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_visual_information.png" style="margin-bottom:14px;"><br><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_tit1.png"></h1>
			<p><span><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_tit.png" style="margin-bottom:8px;"></span><br>2020년 1월 11일 토요일 1시 30분<br>
					‘Future is Now, 미래를 it는 KH’를 주제로 여러분을 미래로 안내할 강연자들과 함께 찾아갑니다.</p>
		</div>
		<div id="banner_bot_scroll_icon" style="top: 663px;"></div>
	</div><!-- //main_visual_wrap -->
	<div id="section_plan_wrap">
	<img src="${pageContext.request.contextPath}/resources/images/talk2020/section_question_icon.png" class="bg_icon1">
		<div class="section_plan">
			<ul class="list_ul">
				<li>	
					<div class="container">
					 <img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list1_icon1.png" alt="Avatar" class="image">
					  <div class="overlay">
						<div class="text">
							<p class="text_history_wrap wrap1">KBS 17기 공채 개그맨으로 데뷔 후<br>sns의 활발한 활동 & 콘서트등으로 대중에게<br>친근한 이미지를 소유한 유쾌한 방송인<br></p>
							<div class="text_history history1">
							<p class="text_history_img"><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list_history.png"></p>
							<p class="text_history_detail detail0">· KBS 17기 공채 개그맨<br>· 2015 이정수 놀이콘서트<br>· 2014 구세군 홍보대사</p>
							</div>
						</div>
					  </div>
					</div>
				</li>
				<li>
					<div class="container">
					 <img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list1_icon2.png" alt="Avatar" class="image">
					  <div class="overlay1">
						<div class="text1">
							<p class="text_history_wrap wrap2">열애중(답가), 신용재 등의 연이은 히트로<br>주목받고 있는 INDIAN LABLE 소속의<br>싱어 송 라이터<br></p>
							<div class="text_history history2">
							<p class="text_history_img"><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list_history2.png"></p>
							<p class="text_history_detail detail1">♪ 신용재<br>♪ 비오는 날 뭐해<br>♪ 혼코노 </p>
							</div>
					  </div>
					</div>
				</li>
				<li>
					<div class="container">
					 <img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list1_icon3.png" alt="Avatar" class="image">
					  <div class="overlay2">
						<div class="text2">
							<p class="text_history_wrap wrap3">국제 무대에서 개발자로 맹활약중인<br>박민혁 팀장님의 특별강연!<br><span>‘IT 개발자로 살아가기’</span><br></p>
							<div class="text_history history3">
							<p class="text_history_img"><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list_history3.png"></p>
							<p class="text_history_detail detail2">· Facebook 파트너 엔지니어 팀장<br>· 골드만 삭스 런던 분석전문가<br>· 라쿠텐 트래블 서버 개발팀 팀장</p>
							</div>
					  </div>
					</div>
				</li>
				<li>
					<div class="container">
					 <img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list1_icon4.png" alt="Avatar" class="image">
					  <div class="overlay3">
						<div class="text3">
							<p class="text_history_wrap wrap4">KH를 먼저 다녀간 선배님이<br>후배들에게 전하는 개발자로서의 경험과<br>꼭 필요한 사회생활 꿀팁!<br></p>
							<div class="text_history history4">
							<p class="text_history_img"><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_list_history4.png"></p>
							<p class="text_history_detail detail3">· 자바 선배님<br>· 보안 선배님</p>
							</div>
					  </div>
					</div>
				</li>
			</ul>
		</div><!-- //section_plan -->
		</div>
	</div><!--~-->

	<div id="section_question_wrap">
		<div class="question_event_participation">
			<div class="event_participation">
				<h1><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_visual_participation.png"><br>
				<img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_tit2.png"></h1>
				<p><span><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_question_icon4.png" style="margin-bottom:8px;"></span><br>강연자님과 선배님께 궁금한 사항이 있다면 무엇이든 물어보세요!<br>선택된 질문은 Q&A시간에 답변 드리며, 참가자와 함께 정보를 공유할 수 있습니다.</p>
			</div>
		</div>
		<div class="section_question">
			<div class="question_wrap">
				<div class="question_left">
					<div class="line"></div>
					<div class="question_left_in">
						<table cellpadding="0" cellspacing="0">
							<h1>토크콘서트 신청하기</h1>
							<caption>토크콘서트 신청하기</caption>
							<colgroup>
								<col style="width:140px"> 
								<col />
							</colgroup>
							<tbody>
								<tr>
									<th>신청자 이름</th>
									<td>
										<input type="text" id="name" name="name" value="${sessionScope.USER.name}" class="text_name" maxlength="40" />
									</td>
								</tr>
								<tr>
									<th>휴대폰 번호</th>
									<td>
										<input type="tel" id="tel" name="tel" value="${sessionScope.USER.mobile}" class="tel_number" maxlength="13" onkeydown="addminus(event)" />
									</td>
								</tr>
								<tr>
									<th style="padding-top: 12px;">해당지원</th>
									<td>
										<select id="jiwon" name="jiwon" style="width: 160px; height: 40px; cursor: pointer;" >
											<option value="" selected="selected">선택</option>
											<option value="2">강남지원</option>
											<option value="6">종로지원</option>
											<option value="10">당산지원</option>
											<option value="0">기타</option>
										</select>
									</td>
								</tr>
							</tbody>
						</table>
						<div class="send_agree">
							<p class="">* 수강생 / 수료생은 꼭 해당지원을 선택해 주세요.</p>
							<p class="">* 기입하신 휴대폰 번호로 티켓 번호가 전송됩니다.</p>
							<p class=""><a href="javascript:fnLayerOpen('popup_personal');" id="talk" style="font-size:12px;">* <span class="agree_information">개인정보 취급 약관</span>에 동의합니다.</a></p>	
						</div>
					</div>
				</div>
				<div class="question_center">
					<table cellpadding="0" cellspacing="0">
						<h1>토크콘서트 질문하기</h1>
						<caption>토크콘서트 신청하기</caption>
						<colgroup>
							<col style="width:140px"> 
							<col />
						</colgroup>
						<tbody>
							<tr>
								<th>페이스북 파트너 엔지니어<br>박민혁 팀장님께 질문하기</th>
								<td>
									<textarea id="question_admin"></textarea>
								</td>
							</tr>
							<tr>
								<th>자바과정 수료생<br>선배님께 질문하기</th>
								<td>
									<textarea id="question_java" name="question_kh"></textarea>
								</td>
							</tr>
							<tr>
								<th>보안과정 수료생<br>선배님께 질문하기</th>
								<td>
									<textarea id="question_security" name="question_kh"></textarea>
								</td>
							</tr>
						</tbody>
					</table>
					<p onclick="fnApply();">신청하기</p>
				</div>
			</div>
		</div><!--//section_plan_question-->
	 <img src="${pageContext.request.contextPath}/resources/images/talk2020/section_question_icon2.png" class="bg_icon2">
	</div><!-- //section_plan_wrap -->
	</div>
	
	<div id="section_present_wrap">
		<div class="section_present">
			<div class="question_event_present">
				<h1><img src="${pageContext.request.contextPath}/resources/images/talk2020/main_visual_information.png" style="margin-top:50px;"><br>
				<img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_tit3.png" style="margin-bottom:21px;"></h1>
				<p><span><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_present_tit.png"  style="margin-bottom:8px;"></span><br>참여하신 분을 위해 감사한 마음을 담은 경품을 준비했습니다.<br>토크콘서트도 즐기고 경품의 기회도 잡으세요!</p>
			</div>
			<div class="present_box1">
				<div class="section_present_in">
					<ul class="list_ul">
						<li><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_present_icon.jpg"></li>
						<li><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_present_icon2.jpg"></li>
						<li><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_present_icon3.jpg"></li>
						<li><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_present_icon4.jpg"></li>
					</ul>
				</div>
			</div>
			<div class="contact_box">
				<div class="contact_box_in">
					<div class="contact_box1"></div>
						<div class="contact_box2">
							<p class="contact_txt_p">
							<img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_tit5.png"></h1>
							<dl>
								<dt>[티켓 수령 안내]</dt>
								<dd>- 참가 신청 완료 후 SMS를 통해 티켓 교환권이 발송됩니다.</dd>
								<dd>- 수강생은 각 지원 안내데스크에서 티켓 교환권으로 티켓을 교환할 수 있습니다. </dd>
								<dd>- 수료생 및 안내데스크 방문이 어려우신 분은 공연당일 현장에서 교환하실 수 있습니다.</dd>
								<dd>- 티켓을 통한 경품추첨이 있을 예정이니 분실에 주의하시길 바랍니다.</dd>
							</dl>
							<dl>
								<dt>[공연장 입장 안내]</dt>
								<dd>- 13시 30부터 입장하실 수 있으며, 공연은 17:00에 종료됩니다.</dd>
							</dl>
							<dl>
								<dt>[교통 및 주차 안내]</dt>
								<dd>- 주차장: 흰물결아트센터 뒷편 골목</dd>
								<dd>- 주차요금: 3시간 5천원 </dd>
								<dd>- 주차공간이 협소하오니 가급적 대중교통을 이용하시길 바랍니다.</dd>
							</dl>
							<dl>
								<dd style="margin-top:10px">1. 대중교통</dd>
								<dd>- 지하철 2호선 서초역 7번 출구 1분 이내</dd>
							</dl>
							<dl>
								<dd style="margin-top:10px">2. 자가용</dd>
								<dd>- 서울 서초구 반포대로 150 흰물결아트센터</dd>
							</dl>
						</div><!--//contact_box2-->
					</div><!--contact_box_in-->
				</div><!--//contact_box-->
			</div><!-- //section_present_wrap-->

		<div id="section_event_map">
			<div class="map_box">
				<div id="map" class="contact_map"><img src="${pageContext.request.contextPath}/resources/images/talk2020/section_contact_map.jpg" onclick="window.open('https://v4.map.naver.com/?query=%EC%84%9C%EC%9A%B8%ED%8A%B9%EB%B3%84%EC%8B%9C+%EC%84%9C%EC%B4%88%EA%B5%AC+%EB%B0%98%ED%8F%AC%EB%8C%80%EB%A1%9C+150+%ED%9D%B0%EB%AC%BC%EA%B2%B0%EC%95%84%ED%8A%B8%EC%84%BC%ED%84%B0+B1%EC%B8%B5')" target="_blank" style="cursor:pointer;"></div>
			</div>
		</div>
	
	<div id="footer_wrap">
		<div class="footer">
			<p>
				<img src="${pageContext.request.contextPath}/resources/images/talk2020/section_plan_text5.png">
			</p>
			<img src="${pageContext.request.contextPath}/resources/images/talk2019/footer_logo.png" alt="kh정보교육원 로고">
		</div>
	</div>
</div><!-- //wrapper -->

<script> 
$(document).ready(function(){
	moving();
	var scrollInterval = setInterval(moving,1200);
    
   setTimeout(function() {
        clearInterval(scrollInterval);
        $('#banner_bot_scroll_icon').stop();
        $('#banner_bot_scroll_icon').fadeOut();
    },10000);
   let branch = '${sessionScope.USER.branch}';
   if(branch === "3" || branch === "5"){
	   branch = "2";
   }
   $("#jiwon option[value='"+branch+"']").attr("selected", "selected");
   $("#span_jiwon").html($("#jiwon option:selected").html()).parent().addClass('changed');
});
function moving(){
	   $('#banner_bot_scroll_icon').animate({'top':'663px'},600).animate({'top':'643px'},600);
}
/* 탭 클릭 */
 $('.anchor_tab li a').on('click',function(){
 	/* $('.tab').each(function(index,item){
		 if($(item).attr('class').indexOf('on') !== -1){
			 $(item).removeClass('on');
		 } 
 	}); */
	var height = $(this).attr('data-height');
	scroll_to_anchor_tab(height);
});

$('.anchor_tab li a').hover(function(){
 	$(this).next().addClass('on')
},function(){
	$(this).next().removeClass('on');	
});

// 탭 이동 - 부드러운 스크롤
function scroll_to_anchor_tab(height) {
	$('body,html,document').animate({scrollTop:height},400);
}

function addminus(event) {
	var code = event.keyCode;
	if (code == 8 || code == 46) {
		return false;
	}		


	var value = $("#tel").val();
	if (value.length == 3) {
		$("#tel").val(value + "-");
	}
	if (value.length == 8) {
		$("#tel").val(value + "-");
	}
}

function fnApply() { // 신청하기 진행
	/* 화살표 함수 ie에서 지원x, 가급적이면 사용x , 다른 validate.js 개발 필요 */
	/* setValidateElement();
	fnValidate().then(errors => { 
		if (jQuery.isEmptyObject(errors)) { // valid => boolean				
			fnOk();
		} else {
			alertValidateErrors();
		}
	});  */
	if($('#name').val() === '' || $('#name').val() === undefined){
		alert('신청이 종료되었습니다.');
		return;
	}
	const pattern = /(^[0-9]{3}-[0-9]{2,4}-[0-9]{2,4})/gi;  
	const match = pattern.exec($('#tel').val());
	
	if($('#tel').val() === '' || $('#tel').val() === undefined){
		alert('신청이 종료되었습니다.');
		return;
	}
	else if(match === null){
		alert('신청이 종료되었습니다.');
		return;
	}
	if($('#jiwon').val() === '' || $('#jiwon').val() === undefined){
		alert('신청이 종료되었습니다.');
		return;
	}
	else{
		fnOk();
	}
	
}

function fnOk() { // 값 전송
	let question_kh = document.getElementsByName('question_kh');
	let question = '';
	
	for(let i=0; i<question_kh.length; i++){
		if(question_kh[i].value !== ''){
			if(question_kh[i].getAttribute('id') === 'question_java'){
				question +="∮자바선배:"+question_kh[i].value;
			}
			if(question_kh[i].getAttribute('id') === 'question_security'){
				question +="∮보안선배:"+question_kh[i].value;
			}
		}
	}
	
	var	params	= {
		category        : 'T202001',
		name			: $("#name").val(),
		mobile			: $("#tel").val(),
		branch     		: $("#jiwon").val(),
		stdt_no 		: '${sessionScope.USER.stdt_no}',
		question_admin  : $("#question_admin").val(),
		question_kh	    : question
	};

	$.ajax({
		url		: '${pageContext.request.contextPath}/question/insertTalkEvent.kh',
		dataType	: 'json',
		type		: 'post',
		data		: params,
		beforeSend	: function(){
			// fnLayerOpen('loading');
		},
		success		: function (data, textStatus) {
			// fnLayerClose();
			alert(data['message']);

			if (data['result'] == '1') {
				window.location.reload();
			}
		},
		error		: function (jqXHR, textStatus, errorThrown) {
			alert('오류가 발생했습니다\n[' + textStatus + ']\n' + errorThrown);
		}
	});
}
	var typingBool = false; 
	var curIdx = 0; 
	var splitIdx = 0;
	var inter;
	let pause = true;
	var typingTxt = $(".typing-txt").text(); // 타이핑될 텍스트를 가져온다 
	var splitTextAf = typingTxt.split("|")[1].split("");
	var splitTextBe = typingTxt.split("|")[0].split("");	
	typingTxt=typingTxt.split(""); // 한글자씩 자른다.    
  	if(typingBool==false){ // 타이핑이 진행되지 않았다면 
	     typingBool=true;
	     var tyInt = loadEnd();
	} 
   function loadEnd(){
	   const img = new Image();
	   const main_background = document.querySelector("#main_visual_wrap");
	   img.src = main_background.style.background.slice(4, -1).replace(/"/g, "");
	   img.onloadend = interval();
   }
   function interval(){
	   inter = setInterval(typing, 100);
	   return inter
   }
   function typing(){
     const curTxt = document.querySelector(".typing");
     if(curIdx < splitTextBe.length){
     	const addP = document.createElement('span') ,
     	 pText = document.createTextNode(typingTxt[curIdx]);
     	addP.appendChild(pText);
     	addP.classList.add("spanTyping");
     	curTxt.appendChild(addP);
     }
     else if(curIdx == splitTextBe.length){
    	 if(splitIdx == 0 && pause){    		
    		 pause = false;
    		 clearInterval(inter);
    		 setTimeout(function(){interval();}, 730);
    		 return false;
    	 }
     	 if(splitIdx < 5){
     		const node_list = curTxt.childNodes;
     		curTxt.removeChild(node_list[curIdx-1-splitIdx]);
         	curIdx--;
         	splitIdx++;
     	}
 	 }
     else if(curIdx > splitTextBe.length && curIdx < typingTxt.length){
      	const addP = document.createElement('span') ,
     	 pText = document.createTextNode(typingTxt[curIdx]);
     	addP.appendChild(pText);
     	addP.classList.add("spanTyping");
     	curTxt.appendChild(addP);
     }else{
     	clearInterval(inter);
     	curTxt.style.animationIterationCount = "unset";
     }
     curIdx++;
   }  

    
</script>
